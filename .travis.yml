language: java
jdk:
- oraclejdk8

before_install:
- sudo apt-get install jq
- wget -O ~/codacy-coverage-reporter-assembly-latest.jar $(curl https://api.github.com/repos/codacy/codacy-coverage-reporter/releases/latest | jq -r .assets[0].browser_download_url)

after_success:
- java -jar ~/codacy-coverage-reporter-assembly-latest.jar report -l Java -r ktapi-report/target/site/jacoco-aggregate/jacoco.xml

deploy:
  provider: releases
  api_key:
    secure: fDYuxJwE3UcKUaFa9LqWnROXiP2/4CLMK/jgFN1uOqR4jYOUYBlI2ldErd5p3R4rn9wMiixv0NxGQEn9jx4UoYf7NSZoPOd53DsFf0KQiOMP1PT2VN7de7xRknD0idf+1jl208+jQpuEvC1mVlyL/xUrOC8yGF4Tvh9KBUSbgFCqp6pmA4s7xRCBNZDcH44NVdWzvnDOqPs9+G4eIN94d7fpqzuc1+ht5nXoGIWe+R84s6EpBZ1VOZX2Y2YJmuIZGo3sP9CBYWQ+hYOdJLF3TbMKwwjLsKnnIW7QQ34BxV886CbiTCUCuRRDCzI1YP+hUSBquvOf3m/obJhvNVMEVy/8E5/x0llhUFNkQhOZVdf/dyb3C9iZjRk+Xfb4naUtm8rGVl/yt+sBoSaI5s6jDO/JCIGQGAHitCXfhynnK+JakOjZCrMh7CX7EJ1/RJ8cBQygQbJL5IJcp5RsxKs3iV1iJOzzsTq0BrdFtY+PDct4zt+4dk29QdktQNFRe3lwms4fhkqKayrHlAl3TnBfTpRYK3UlxRMfUQNLjUKPMmkFgDquVmnywFHOwIlXGEhH4IDk8oKFm6myopXPlY45aPuZa1y64E2XZeLJBRJLSO29L4JVFtZy2E99+iCQ/OXXNxy5ZQDXBKqhKrlKqh2KHnrTGx9ztcPwtBmb3IEcF4c=
  file_glob: true
  file: "**/*.jar"
  skip_cleanup: true
  on:
    repo: 125m125/ktapi-java
    tags: true

env:
  global:
    secure: OhVdOWtvbK3s7q8ANC/OdVx7b3/4iJGNwU+a35khglYEuAb0oFWIEkc8Tq7R7YCSsl3807p6m2Fzv/IYv4h/BD71oJBAp3h0RZhGWsZRvwAFhpaWaC9wLqicokFNn2Ilt1thqL5/3qV9bjZPG0Pmpt8L27peZ1RXeaWSq6XfEkszId/IeOALSGdhe1Sk0UJfvmcqv01f/0YNf/y/1FI2Oc2mEjctXjF7/qAjsxiFzxmwxxW70t3lXsLF5cX70mH4ouYJqiVQi5EQBiusuieaXdJXrzi3CXNt//XyMqEV+mGevWa5rIB2lm6FG/SO3EWzepf/Pm/VYuhLEWPz5rgNwTUiWqXstgyIhP+Dbmw6uQQxK6x2jeYXLu1ZEFCXzcHAKCZStrCHcJPhJvRTVxp9InbpBWGVguW86cZXAZ7xh574zLDKQffxgZo54ZykLS5YqEW4qsT8sqCTHySC7Maqrqd0q+n4YuSTGyOJPrfl3JvkDQMSk/bU4hqpwdrHRCHd1v8ByLIkvFZjzjPB4V1HgY6p7D52Bx53yNY442wr+aZgScup/bK4sad9xf+m9aF6hdkWJU8fk539t5nT5N/HhjyIh2h0s6+dIa5htnwBdFT2395PfLwBeAhDv7RP2OZ743Dj1NzyqtdbK2/6pHaKW2R67eG6cSLhynanwi1MRcc=
